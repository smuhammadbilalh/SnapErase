<?xml version="1.0" encoding="utf-8"?>
<Window
    x:Class="Snap_Erase.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:Snap_Erase"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d"
    Title="Snap Erase">

        <Window.SystemBackdrop>
            <MicaBackdrop />
        </Window.SystemBackdrop>

        <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
            <Grid Margin="20">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="0,0,0,20">
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                        <Image Source="/logosnapremovee.png"
               Width="24"
               Height="24"
               Margin="0,0,8,0"/>
                        <TextBlock Text="Snap Erase" 
                   FontSize="24" 
                   FontWeight="Bold"/>
                    </StackPanel>
                </StackPanel>


                <StackPanel Grid.Row="2" 
                        Orientation="Horizontal" 
                        HorizontalAlignment="Left" 
                        Spacing="10"
                        Margin="0,0,0,20">

                    <Button x:Name="SelectImageButton" 
                        Click="SelectImageButton_Click"
                        ToolTipService.ToolTip="Select Image">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE8E5;"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="CaptureImageButton" 
                        Click="CaptureImageButton_Click"
                        ToolTipService.ToolTip="Take Photo">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE722;"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="RemoveBackgroundButton" 
                        IsEnabled="False"
                        Click="RemoveBackgroundButton_Click"
                        Style="{ThemeResource AccentButtonStyle}"
                        ToolTipService.ToolTip="Remove Background">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xEA99;"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="SaveImageButton" 
                        IsEnabled="False"
                        Click="SaveImageButton_Click"
                        ToolTipService.ToolTip="Save Result">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE74E;"/>
                        </StackPanel>
                    </Button>

                    <Button x:Name="ClearButton" 
                        Click="ClearButton_Click"
                        ToolTipService.ToolTip="Clear All">
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon Glyph="&#xE74D;"/>
                        </StackPanel>
                    </Button>

                </StackPanel>

                <Grid Grid.Row="3" x:Name="ContentGrid">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition x:Name="VerticalSpacer" Height="0"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition x:Name="LeftCol" Width="*"/>
                        <ColumnDefinition x:Name="HorizontalSpacer" Width="20"/>
                        <ColumnDefinition x:Name="RightCol" Width="*"/>
                    </Grid.ColumnDefinitions>

                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup>
                            <VisualState x:Name="NarrowLayout">
                                <VisualState.StateTriggers>
                                    <AdaptiveTrigger MinWindowWidth="0" />
                                </VisualState.StateTriggers>
                                <VisualState.Setters>
                                    <Setter Target="ResultPanel.(Grid.Row)" Value="2"/>
                                    <Setter Target="ResultPanel.(Grid.Column)" Value="0"/>
                                    <Setter Target="HorizontalSpacer.Width" Value="0"/>
                                    <Setter Target="RightCol.Width" Value="0"/>
                                    <Setter Target="VerticalSpacer.Height" Value="20"/>
                                    <Setter Target="ContentGrid.RowDefinitions[0].Height" Value="*"/>
                                    <Setter Target="ContentGrid.RowDefinitions[2].Height" Value="*"/>
                                </VisualState.Setters>
                            </VisualState>
                            <VisualState x:Name="WideLayout">
                                <VisualState.StateTriggers>
                                    <AdaptiveTrigger MinWindowWidth="720" />
                                </VisualState.StateTriggers>
                                <VisualState.Setters>
                                    <Setter Target="ResultPanel.(Grid.Row)" Value="0"/>
                                    <Setter Target="ResultPanel.(Grid.Column)" Value="2"/>
                                    <Setter Target="HorizontalSpacer.Width" Value="20"/>
                                    <Setter Target="RightCol.Width" Value="*"/>
                                    <Setter Target="VerticalSpacer.Height" Value="0"/>
                                    <Setter Target="ContentGrid.RowDefinitions[0].Height" Value="*"/>
                                </VisualState.Setters>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>

                    <Grid x:Name="OriginalPanel" Grid.Row="0" Grid.Column="0">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                            <FontIcon Glyph="&#xE722;" FontSize="16" Margin="0,0,8,0"/>
                            <TextBlock Text="Original Image" 
                              FontSize="16" 
                              FontWeight="SemiBold"/>
                        </StackPanel>

                        <Border Grid.Row="1"
                           Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                           BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                           BorderThickness="1"
                           CornerRadius="12"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           MinWidth="200"
                           MaxWidth="600"
                           MinHeight="200"
                           MaxHeight="400">
                            <Border.Shadow>
                                <ThemeShadow />
                            </Border.Shadow>
                            <Grid>
                                <StackPanel x:Name="OriginalPlaceholder" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center"
                                       Opacity="0.6">
                                    <FontIcon Glyph="&#xE91B;" FontSize="48" Margin="0,0,0,10"/>
                                    <TextBlock Text="No image loaded" 
                                          FontSize="14" 
                                          HorizontalAlignment="Center"/>
                                    <TextBlock Text="Paste (Ctrl+V) or drag &amp; drop" 
                                          FontSize="12" 
                                          HorizontalAlignment="Center"
                                          Opacity="0.7"
                                          Margin="0,4,0,0"/>
                                </StackPanel>

                                <Image x:Name="OriginalImage" 
                                  Stretch="Uniform"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"
                                  Visibility="Collapsed"/>
                            </Grid>
                        </Border>
                    </Grid>

                    <Grid x:Name="ResultPanel" Grid.Row="0" Grid.Column="2">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="*"/>
                        </Grid.RowDefinitions>
                        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
                            <FontIcon Glyph="&#xE945;" FontSize="16" Margin="0,0,8,0"/>
                            <TextBlock Text="Background Removed" 
                              FontSize="16" 
                              FontWeight="SemiBold"/>
                        </StackPanel>

                        <Border Grid.Row="1"
                           Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                           BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                           BorderThickness="1"
                           CornerRadius="12"
                           HorizontalAlignment="Center"
                           VerticalAlignment="Center"
                           MinWidth="200"
                           MaxWidth="600"
                           MinHeight="200"
                           MaxHeight="400">
                            <Border.Shadow>
                                <ThemeShadow />
                            </Border.Shadow>
                            <Grid>
                                <!-- Checkerboard pattern using a Rectangle with inline pattern -->
                                <Rectangle x:Name="CheckerboardBackground" 
                                       Visibility="Collapsed"
                                       HorizontalAlignment="Stretch"
                                       VerticalAlignment="Stretch">
                                    <Rectangle.Fill>
                                        <SolidColorBrush Color="{ThemeResource SystemBaseLowColor}" Opacity="0.1"/>
                                    </Rectangle.Fill>
                                </Rectangle>

                                <StackPanel x:Name="ResultPlaceholder" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center"
                                       Opacity="0.6">
                                    <FontIcon Glyph="&#xE8B9;" FontSize="48" Margin="0,0,0,10"/>
                                    <TextBlock Text="AI will process here" 
                                          FontSize="14" 
                                          HorizontalAlignment="Center"/>
                                </StackPanel>

                                <Image x:Name="ResultImage" 
                                  Stretch="Uniform"
                                  HorizontalAlignment="Center"
                                  VerticalAlignment="Center"
                                  Visibility="Collapsed"/>

                                <StackPanel x:Name="ProcessingIndicator" 
                                       HorizontalAlignment="Center" 
                                       VerticalAlignment="Center"
                                       Visibility="Collapsed">
                                    <ProgressRing IsActive="True" Width="40" Height="40"/>
                                    <TextBlock Text="AI is removing background..." 
                                          FontSize="14" 
                                          HorizontalAlignment="Center" 
                                          Margin="0,10,0,0"/>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </Grid>
        </ScrollViewer>
    </Window>